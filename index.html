const htmlAddLink = `<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery-qrcode@1.0.3/dist/jquery-qrcode.min.js"></script>
  <style>
    :root {
      --bg-color: #f8f9fa;
      --text-color: #2d3436;
      --container-bg: #ffffff;
      --shadow-color: rgba(0, 0, 0, 0.1);
      --primary-color: #e84393;
      --primary-hover: #d6336c;
      --secondary-text: #636e72;
      --input-bg: #ffffff;
      --input-border: #e0e0e0;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --bg-color: #1a1a1a;
        --text-color: #e0e0e0;
        --container-bg: #2d2d2d;
        --shadow-color: rgba(0, 0, 0, 0.3);
        --primary-color: #ff79b0;
        --primary-hover: #ff5c9c;
        --secondary-text: #a0a0a0;
        --input-bg: #383838;
        --input-border: #505050;
      }
    }

    /* 保持之前的所有样式不变 */
    /* [之前定义的所有CSS样式] */

    .list-group-item {
      background: var(--container-bg);
      border-color: var(--input-border);
      margin-bottom: 1rem;
    }

    .btn-danger {
      background: #dc3545;
    }

    .btn-info {
      background: #0dcaf0;
    }

    #urlList {
      margin-top: 2rem;
    }

    .qrcode-canvas {
      margin: 1rem auto;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Tiny Link Manager ✨</h1>
    <div class="kawaii">(◕‿◕✿)</div>

    <!-- 主表单 -->
    <form onsubmit="shorturl(); return false;">
      <div class="form-group">
        <label>Long URL</label>
        <input 
          type="url" 
          id="longURL"
          class="form-control"
          placeholder="https://example.com/long-url"
          required
        >
      </div>

      <div class="form-group mt-3">
        <label>Custom Slug (optional)</label>
        <div class="input-group">
          <input 
            type="text" 
            id="keyPhrase"
            class="form-control"
            placeholder="my-custom-link"
            pattern="[A-Za-z0-9_-]{3,20}"
            title="3-20 characters (letters, numbers, _-)"
          >
          <button 
            class="btn btn-outline-secondary" 
            type="button"
            onclick="query1KV()"
          >🔍</button>
        </div>
      </div>

      <button 
        id="addBtn"
        type="submit" 
        class="btn mt-3"
        style="background: var(--primary-color); color: white;"
      >Shorten it!</button>
    </form>

    <!-- 链接列表 -->
    <div id="urlList" class="mt-4 w-100"></div>

    <!-- 结果模态框 -->
    <div class="modal fade" id="resultModal">
      <div class="modal-dialog">
        <div class="modal-content" style="background: var(--container-bg);">
          <div class="modal-body">
            <div id="result"></div>
            <button 
              class="btn mt-3"
              style="background: var(--primary-color); color: white;"
              onclick="copyurl('result')"
            >Copy</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 保留之前的JavaScript代码 -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>`;
